addons:
  chrome: stable

language: node_js

jobs:
  include:

  - name: lint
    stage: test
    node_js:
      - "10"
      - "node"
      - "lts"
    script: yarn run lint

  - name: test
    stage: test
    node_js:
      - "10"
      - "node"
      - "lts"
    script:
      - yarn run test
      - yarn global add codacy-coverage
      - export PATH="$PATH:$(yarn global bin)"
      - codacy-coverage < coverage/lcov.info

  - name: build
    stage: test
    node_js:
      - "10"
      - "node"
      - "lts"
    script: yarn run build
